<h3>PGA-Usage: Historic utilization of PGA-structures</h3>
Insufficient supply of PGA-memory for sort and hash operations leads to transfer to TEMP-tablespace with according impact on performance<pre style='background-color: #FFFFCC;'>SELECT /*+ DB-Tools Ramm - PGA-Historie*/
                             ss.Begin_Interval_Time, p.Instance_Number,
                             ROUND(MAX(DECODE(p.Name, 'aggregate PGA target parameter'      , p.Value, 0))/(1024*1024)) "PGA Aggregate Target (MB)",
                             ROUND(MAX(DECODE(p.Name, 'aggregate PGA auto target'           , p.Value, 0))/(1024*1024)) "PGA Auto Target (MB)",
                             ROUND(MAX(DECODE(p.Name, 'global memory bound'                 , p.Value, 0))/(1024*1024)) "global memory bound (MB)",
                             ROUND(MAX(DECODE(p.Name, 'total PGA inuse'                     , p.Value, 0))/(1024*1024)) "total PGA inuse (MB)",
                             ROUND(MAX(DECODE(p.Name, 'total PGA allocated'                 , p.Value, 0))/(1024*1024)) "total PGA allocated (MB)",
                             ROUND(MAX(DECODE(p.Name, 'total freeable PGA memory'           , p.Value, 0))/(1024*1024)) "total freeable PGA memory (MB)",
                             MAX(DECODE(p.Name, 'process count'                             , p.Value, 0))              "process count",
                             MAX(DECODE(p.Name, 'max processes count'                       , p.Value, 0))              "max processes count",
                             ROUND(MAX(DECODE(p.Name, 'PGA memory freed back to OS'         , p.Value, 0))/(1024*1024)) "PGA mem freed back (MB kum.)",
                             ROUND(MAX(DECODE(p.Name, 'total PGA used for auto workareas'   , p.Value, 0))/(1024*1024)) "total PGA Used Auto (MB)",
                             ROUND(MAX(DECODE(p.Name, 'total PGA used for manual workareas' , p.Value, 0))/(1024*1024)) "total PGA used manual (MB)",
                             MAX(DECODE(p.Name, 'over allocation count'                     , p.Value, 0)) -            -- Subtraktion Vorgaenger fuer Delta
                             (SELECT Value FROM DBA_hist_PgaStat i WHERE i.DBID=p.DBID AND i.Snap_ID=p.Snap_ID-1 AND I.INSTANCE_NUMBER = p.Instance_Number AND i.Name =  'over allocation count') "over allocation count",
                             MAX(DECODE(p.Name, 'cache hit percentage'   , p.Value, 0))                                 "cache hit pct. (since startup)"
                      FROM   DBA_hist_PgaStat p
                      JOIN   DBA_Hist_Snapshot ss ON ss.DBID = p.DBID AND ss.Instance_Number = p.Instance_Number AND ss.Snap_ID = p.Snap_ID
                      WHERE  p.Instance_Number = 1
                      AND    ss.Begin_Interval_Time > SYSDATE-:P1
                      GROUP BY ss.Begin_Interval_Time, p.Instance_Number, p.DBID, p.Snap_ID
                      ORDER BY ss.Begin_Interval_Time</pre><div>Parameter :P1: Number of days in history backward from now for consideration</div>