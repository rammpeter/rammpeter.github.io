<h3>Detection of unused indexes by system monitoring</h3>
DB monitors usage (access) on indexes if declared so before by 'ALTER INDEX ... MONITORING USAGE'.<br/>
Results of usage monitoring can be queried from v$Object_Usage but only for current schema.<br/>
Over all schemas usage can be monitored with following SQL.<br/>
Caution: GATHER_INDEX_STATS also counts as usage even if no other select touches this index.<br/>
<br/>
Additional information about index usage can be requested from DBA_Hist_Seg_Stat and DBA_Hist_Active_Sess_History.<pre style='background-color: #FFFFCC;'>SELECT /* DB-Tools Ramm: unused indexes */ u.*, i.Num_Rows, i.Distinct_Keys,
                             (SELECT SUM(s.Bytes) FROM DBA_Segments s WHERE s.Owner=u.Owner AND s.Segment_Name=u.Index_Name)/(1024*1024) MBytes,
                             i.Tablespace_Name, i.Uniqueness, i.Index_Type,
                             (SELECT IOT_Type FROM DBA_Tables t WHERE t.Owner = u.Owner AND t.Table_Name = u.Table_Name) IOT_Type
                      FROM   (
                              SELECT u.name Owner, io.name Index_Name, t.name Table_Name,
                                     decode(bitand(i.flags, 65536), 0, 'NO', 'YES') Monitoring,
                                     decode(bitand(ou.flags, 1), 0, 'NO', 'YES') Used,
                                     ou.start_monitoring, ou.end_monitoring
                              FROM   sys.object_usage ou
                              JOIN   sys.ind$ i  ON i.obj# = ou.obj#
                              JOIN   sys.obj$ io ON io.obj# = ou.obj#
                              JOIN   sys.obj$ t  ON t.obj# = i.bo#
                              JOIN   sys.user$ u ON u.user# = io.owner#
                              WHERE  TO_DATE(ou.Start_Monitoring, 'MM/DD/YYYY HH24:MI:SS') < SYSDATE-:P1
                             )u
                      JOIN DBA_Indexes i ON i.Owner = u.Owner AND i.Index_Name = u.Index_Name AND i.Table_Name=u.Table_Name
                      WHere Used='NO' AND Monitoring='YES'
                      AND i.Num_Rows > :P2
                      ORDER BY i.Num_Rows DESC NULLS LAST</pre><div>Parameter :P1: Anzahl Tage, die der Start_Monitoring-Zeitstempel ungenutzter Indizes alt sein muss</div><div>Parameter :P2: Minimale Anzahl Rows des Index f√ºr Aufnahme in Selektion</div>